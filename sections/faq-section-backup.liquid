{% liquid
  assign id = section.id
%}

<style>
    #shopify-section-{{id}} {
      box-sizing: border-box;
      margin-top: {{section.settings.margin_top | append: 'px'}};
      margin-bottom: {{section.settings.margin_bottom | append: 'px'}};
      padding-top: {{section.settings.padding_top | append: 'px'}};
      padding-bottom: {{section.settings.padding_bottom | append: 'px'}};
    }
    .wrapper-{{ id }} {
      width: 65%;
      min-width: 850px;
      @media(max-width: 1200px) {
         min-width: 100%;
         width: auto;
      }
    }
    .wrapper-{{ id }} .accordion__faq {
      /* padding-bottom:  var(--Spacing-Container-sm); */
      border-bottom: 1px solid var(--Border-Base-subtle, #E5E7EB);
    }
    .wrapper-{{ id }} .accordion__faq:not(:last-child) {
      margin-bottom: var(--Spacing-Container-sm);
    }  
    .wrapper-{{ id }} .accordion__intro_ {
      position: relative;
      cursor: pointer;
      display: flex;
      gap: var(--Spacing-Container-xs);
      box-sizing: border-box;
      transition: all 1s ease-in-out;
      justify-content: space-between;
      margin-bottom: var(--Spacing-Container-xs);
    }
    .wrapper-{{ id }} .accordion__intro_ h4 {
      color: var(--Content-Base-main, #1F2937);

      /* Headings/H4 */
      font-family: var(--font-family-Title);
      font-size: var(--Font-Size-Heading-H4);
      font-style: normal;
      font-weight: 400;
      line-height: var(--Line-Height-Heading-H4); /* 120% */
      letter-spacing: -0.4px;
      margin: 0;
      @media(max-width: 768px) {
       line-height: 150%;
       letter-spacing: -0.32px;
       padding-right: 24px;
      }
    }
    .accordion__content-wrap {
      color: var(--Content-Base-base, #4B5563);
      /* Paragraph/M */
      font-family: var(--font-family-Body);
      font-size: var(--Font-Size-Paragraph-Regular);
      font-style: normal;
      font-weight: 400;
      line-height:  150%;
      margin-bottom: var(--Spacing-Container-sm);
      @media(max-width: 768px) {
        padding-right: 0px;
      }
      p{
        margin: 0;        
      }
    }
    .wrapper-{{ id }} .faq__icon {
      position: absolute;
      right: 24px;
      top: 0;
    }
    .wrapper-{{ id }} .faq__icon span {
      display: flex;
      width: 24px;
      height: 24px;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 8px;
      border-radius: 56px;
      background: #fff;
      position: absolute;
      top: 0;
      left: 0;
      transition: all 0.4s ease-in-out;
    }
    .wrapper-{{ id }} .faq__icon .minus {
      opacity: 0;
      transition: all 0.4s ease-in-out;
    }
    .wrapper-{{ id }} .accordion__faq.accordion.active .faq__icon .plus {
      rotate: 45deg;
      opacity: 0;
    }
    .wrapper-{{ id }} .accordion__faq.accordion.active .faq__icon .minus {
      opacity: 1;
    }

    @media(max-width: 600px) {
      #shopify-section-{{id}} {
        margin-top: {{section.settings.margin_top_m | append: 'px'}};
        margin-bottom: {{section.settings.margin_bottom_m | append: 'px'}};
        padding-top: {{section.settings.padding_top_m | append: 'px'}};
        padding-bottom: {{section.settings.padding_bottom_m | append: 'px'}};
      }
      .accordion__content-wrap p, accordion__content-wrap a, accordion__content-wrap li {
        font-size: var(--Font-Size-Paragraph-Tiny);
        line-height:  var(--Line-Height-Paragraph-Tiny);        
      }
    }
</style>

<div class="sec-{{ id }}">
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    <div class="wrapper-{{ id }}">
      <accordion-element>
        <div class="accordion-wrapper">
          {% for faq in section.blocks %}
            <div
              class="accordion__faq accordion"
            >
              <div class="accordion__intro_">
                {% if faq.settings.title != blank %}
                  <h4 class="faq_title">{{ faq.settings.title }}</h4>
                {% endif %}
                <div class="faq__icon">
                  <span class="plus">
                    {% render 'all-icons', name: 'faq-plus' %}
                  </span>
                  <span class="minus">
                    {% render 'all-icons', name: 'faq-minus' %}
                  </span>
                </div>
              </div>
              {% if faq.settings.text != blank %}
                <div class="accordion__content_">
                  <div class="accordion__content-wrap">{{ faq.settings.text }}</div>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </accordion-element>
    </div>
  </div>
</div>

<script src="{{ 'custom-accordion.js' | asset_url }}"></script>

<script>
  new Accordion('.wrapper-{{ id }} .accordion-wrapper', {
      closeAll: true,
      initOpenIndex: 1,
      duration: 700,
      activeClass: 'active'
  })
</script>

{% schema %}
{
  "name": "FAQ Section",
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full Width Section",
      "default": false
    },
    {
      "type": "header",
      "content": "Section Spacing Desktop"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 48
    },
    {
      "type": "header",
      "content": "Section Spacing Mobile"
    },
    {
      "type": "range",
      "id": "margin_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 32
    }
  ],
  "blocks": [
     {
       "name": "FAQ",
       "type": "faq",
       "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Where is my order?"
          },
          {
            "type": "richtext",
            "id": "text",
            "label": "Text"
          }
       ]
     }
   ],
  "presets": [
    {
      "name": "FAQ Section",
      "blocks": [
        {"type": "faq"},
        {"type": "faq"},
        {"type": "faq"},
        {"type": "faq"}
      ]
    }
  ]
}
{% endschema %}
