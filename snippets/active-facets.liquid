{%- liquid
  assign sort_by = results.sort_by | default: results.default_sort_by
  assign total_active_values = 0
  assign default_presentation = 'text'
  if results.url
    assign results_url = results.url
  else
    assign terms = results.terms | escape
    assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
  endif
-%}

<div class="active-facets active-facets-mobile medium-hide- large-up-hide- hidden-">
  {%- for filter in results.filters -%}
    {%- for value in filter.active_values -%}
      <facet-remove>
        <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
          <span class="active-facets__button-inner button button--tertiary">
            {{ filter.label | escape }}: {{ value.label | escape }}
            <span class="svg-wrapper">
              {{- 'icon-close-small.svg' | inline_asset_content -}}
            </span>
            <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
          </span>
        </a>
      </facet-remove>
    {%- endfor -%}

    {%- if filter.type == 'price_range' -%}
      {% assign min = filter.min_value.value %}
      {% assign max = filter.max_value.value %}
      {%- if min != null or max != null -%}
        <facet-remove>
          <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
            <span class="active-facets__button-inner button button--tertiary">
              {{ min | default: 0 | money }} - {{ max | default: filter.range_max | money }}
              <span class="svg-wrapper">
                {{- 'icon-close-small.svg' | inline_asset_content -}}
              </span>
              <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
            </span>
          </a>
        </facet-remove>
      {%- endif -%}
    {%- endif -%}
  {%- endfor -%}
  <facet-remove class="active-facets__button-wrapper">
    <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
      <span>{{ 'products.facets.clear_all' | t }}</span>
    </a>
  </facet-remove>
</div>
